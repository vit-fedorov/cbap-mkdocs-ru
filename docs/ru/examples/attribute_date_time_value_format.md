---
title: 'Атрибут «Дата и время». Форматирование значений с помощью формул и N3'
kbId: 4977
tags:
  - дата и время
  - пример
  - форматирование
  - формулы
  - N3
  - Notation3
  - Notation 3
  - тройки
  - триплеты
hide: tags
---

# Атрибут «Дата и время». Форматирование значений с помощью формул и N3 {: #attribute_date_time_value_format }

## Введение

В свойствах атрибута «**Дата и время**» задаётся **формат отображения** из готового перечня, который нельзя изменить.

Для реализации бизнес-требований может потребоваться выводить дату и время в особом формате. Например, может быть необходимо отображать только время без даты или передавать дату и время в виде строки в формате ISO&nbsp;8061. Для этого можно отформатировать значение даты и времени с помощью  **формулы** или **N3** и записать его в **текстовый** атрибут.

Функции форматирования дат и времени позволяют извлечь: год, месяц, число, минуты, секунды и т.п.

Здесь представлен пример форматирования значения атрибута «**Дата и время**» с помощью формулы и выражения на N3.

!!! question "Структура атрибута «Дата и время»"

    --8<-- "attribute_date_time_logic.md"

## Прикладная задача

В HTTP-запросе требуется передавать отдельно дату и время создания записи в формате ISO&nbsp;8061:

``` json
"creationDate": "YYYYMMDD"
"creationTime": "hhmmss"
```

## Исходные данные

Имеется шаблон записи _«Заявки»_.

В заявке имеется системный атрибут «**Дата создания**».

Данные заявки передаются в стороннюю систему через HTTP с помощью сценария _«Отправка заявки»_.

Сценарий запускается по нажатию кнопки _«Отправить заявку»_.

## Настройка форматирования

1. В шаблоне _«Заявки»_ создайте атрибут:

    - **Название:** _Дата создания ISO_
    - **Тип данных: текст**
    - **Формат отображения: обычный**
    - **Вычислять автоматически**
    - **Вычисляемое значение:**
        - **Формула**

        ``` sql
        # Форматируем значение системного атрибута «Дата создания»
        # согласно стандарту ISO 8061.
        FORMAT("{0:YYYYMMDD}", LIST($_creationDate))
        ```

        или

        - **N3**

        ``` turtle
        # Импортируем функции для работы с объектами и строками.
        @prefix object: <http://comindware.com/ontology/object#>. 
        @prefix string: <http://www.w3.org/2000/10/swap/string#>. 
        { 
            # Находим атрибут «Дата создания» в шаблоне «Заявки».
            ("Заявки" "_creationDate") object:findProperty ?creationDateAttribute.
            # Получаем значение атрибута в текущей записи.
            ?item ?creationDateAttribute ?creationDateValue.
            # Форматируем дату и время согласно стандарту ISO 8061.
            # в формате YYYYMMDDThhmmss
            ("{0:YYYYMMDD}" ?creationDateValue) string:format ?value.
        } 
        ```

2. В шаблоне _«Заявки»_ создайте атрибут:

    - **Название:** _Время создания ISO_
    - **Тип данных: текст**
    - **Формат отображения: обычный**
    - **Вычислять автоматически**
    - **Вычисляемое значение:**
        - **Формула**

        ``` sql
        # Форматируем значение системного атрибута «Дата создания»
        # согласно стандарту ISO 8061.
        FORMAT("{0:hhmmss}", LIST($_creationDate))
        ```

        или

        - **N3**

        ``` turtle
        # Импортируем функции для работы с объектами и строками.
        @prefix object: <http://comindware.com/ontology/object#>. 
        @prefix string: <http://www.w3.org/2000/10/swap/string#>. 
        { 
            # Находим атрибут «Дата создания» в шаблоне «Заявки».
            ("Заявки" "_creationDate") object:findProperty ?creationDateAttribute.
            # Получаем значение атрибута в текущей записи.
            ?item ?creationDateAttribute ?creationDateValue.
            # Форматируем дату и время согласно стандарту ISO 8061.
            # в формате YYYYMMDDThhmmss
            ("{0:hhmmss}" ?creationDateValue) string:format ?value.
        } 
        ```

3. Поместите атрибуты _Дата создания_, _«Дата создания ISO»_ и _«Время создания ISO»_ на форму заявки.
4. В сценарии _«Отправка заявки»_ настройте отправку значений атрибутов _«Дата создания ISO»_ и _«Время создания ISO»_.

    Подробные примеры передачи данных с помощью HTTP см. в статьях:

    - _[HTTP-запросы типа GET. Отправка запроса и обработка ответа в формате JSON][http_send_example]_
    - _[HTTP-запросы типа POST. Отправка и получение ответа][http_send_post]_

## Тестирование

1. Создайте запись в шаблоне _«Заявки»_.
2. _Дата создания_ отобразится в формате `23.06.2025 12:00`.
3. _Дата создания ISO_ должна иметь вид `20250623`.
4. _Время создания ISO_ должно иметь вид `120030`.
5. Отправьте заявку по HTTP.
6. _Дата создания ISO_ должна быть передана в виде строки вида `YYYYMMDD`.
7. _Дата создания ISO_ должна быть передана в виде строки вида `hhmmss`.

<div class="relatedTopics" markdown="block">

--8<-- "related_topics_heading.md"

- [Атрибут типа «Дата и время»][attribute_date_time]
- [Настройка поля атрибута типа «Дата и время» на форме][form_dynamic_elements_date_time]
- [Атрибут типа «Часовой пояс»][attribute_timezone]
- [Язык формул][formula_guide]
- [Язык N3][n3_guide]
- [HTTP-запросы типа GET. Отправка запроса и обработка ответа в формате JSON][http_send_example]
- [HTTP-запросы типа POST. Отправка и получение ответа][http_send_post]

</div>

{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}
