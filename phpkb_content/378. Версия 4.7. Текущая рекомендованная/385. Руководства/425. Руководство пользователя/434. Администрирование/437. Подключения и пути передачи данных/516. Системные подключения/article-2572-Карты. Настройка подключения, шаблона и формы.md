---
title: Карты. Настройка подключения, шаблона и формы
kbId: 2572
---

# Карты. Настройка подключения, шаблона и формы

## Введение

Подключение к картографической службе используется для отображения карт на формах и добавления на карты географических меток.

Для отображения карт на форме требуется настроить **системное подключение** типа «**Карты**», шаблон записи, на форме которого будет отображаться карта, и шаблон записи, в котором будут храниться данные меток на карте. Кроме того, на форме с картой можно настроить таблицу для просмотра и ввода данных меток.

Здесь представлены инструкции по настройке подключения к картографической службе Яндекс Карты.

Сведения об использовании карт см. в статье *«[Карты. Использование][map_use]»*.

## Создание подключения

1. Откройте страницу [«**Администрирование**» — «**Подключения**»][administration].
2. Создайте **системное подключение** типа «**Карты**» или откройте имеющееся подключение, дважды нажав его в списке.
3. Настройте свойства подключения к картографической службе:

    - **Отключить** — установите этот флажок, если требуется деактивировать данное подключение;
    - **Название** — введите наглядное наименование подключения;
    - **Использовать по умолчанию** — установите этот флажок, чтобы это подключение использовалось как основное, если имеется несколько подключений типа «**Карты**».
    - **Ключ API** — введите ключ доступа к картографической службе «**JavaScript API и HTTP Геокодер**», полученный в [кабинете разработчика Яндекс](https://developer.tech.yandex.ru/services).
    
    
    
    Внимание!
    
    
    Для использования Яндекс Карт необходимо выбрать ключ именно к службе «**JavaScript API и HTTP Геокодер**», не следует выбирать ключ к службе «**Static API Яндекс.Карт**».
4. Сохраните подключение.

_![Свойства подключения к картографической службе](https://kb.comindware.ru/assets/maps_connection_properties.png)_

## Настройка шаблонов записи и формы

1. Создайте шаблон записи *«Объекты»* для хранения картографических данных со следующими атрибутами:

    - атрибуты типа «**Текст**»:
        - *Страна*
        - *Регион*
        - *Населённый пункт*
        - *Улица*
        - *Дом, строение*
        - *Индекс*
    - атрибуты типа «**Число**»:
        - *Широта*
        - *Долгота*
2. Создайте шаблон записи *«Карты»* с атрибутом *«Объекты на карте»*:

    - **Тип данных: запись**
    - **Связанный шаблон:** *Объекты*
    - **Взаимная связь с атрибутом: с новым**
    - **Атрибут:** *Карта*
    - **Хранить несколько значений:** флажок установлен
3. Поместите на форму атрибут *«Объекты на карте»* и выберите для него **представление** «**Карта**».
4. Установите **высоту** карты от 200 до 480 пикселей. Высота по умолчанию: 240 пикселей.
5. Сопоставьте атрибуты адреса и атрибуты координат с атрибутами шаблона *«Объекты»*.
6. Поместите атрибут *«Объекты на карте»* на форму ещё раз и выберите **представление** «**Таблица**».
7. Добавьте в таблицу *«Объекты на карте»* атрибуты шаблона *«Объекты»*.
8. В область кнопок таблицы *«Объекты на карте»* поместите кнопки «**Создать**» и «**Удалить**».
9. Сохраните форму.
10. Протестируйте работу карты на форме: добавьте, переместите, переименуйте и удалите метки. См. [*«Карты. Использование»*][map_use].

--8<-- "related_topics_heading.md"

**[Карты. Использование][map_use]**

**[Динамические элементы формы. Настройка карты][form_dynamic_elements]**

{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}
