<h1>Вызов процесса</h1><div class="md-container">
<div class="md-main__inner md-grid">
<div class="mce-toc">
<h2 class="toc-heading">Содержание</h2>
<ul>
<li><a href="#mcetoc_1hq4gnau00">Определения</a></li>
<li><a href="#mcetoc_1h28b33420">Операции в меню элемента «Вызов процесса»</a></li>
<li><a href="#mcetoc_1h28b33421">Свойства вызова процесса</a>
<ul>
<li><a href="#mcetoc_1h28b33422">Основные</a>
<ul>
<li><a href="#mcetoc_1h28b33423">Базовые настройки</a></li>
</ul>
</li>
<li><a href="#mcetoc_1hc1rh2ej0">Пример</a>
<ul>
<li><a href="#mcetoc_1hc1rp7mq1">Экспертные настройки</a></li>
</ul>
</li>
<li><a href="#mcetoc_1h28b33424">Данные на входе</a></li>
<li><a href="#mcetoc_1h28b33425">Данные на выходе</a></li>
</ul>
</li>
<li><a href="#mcetoc_1h28b33426">Связанные статьи</a></li>
</ul>
</div>
<div class="md-content">
<div class="notice notice-success">
<h3 class="admonition-title" id="mcetoc_1hq4gnau00">Определения</h3>
<ul>
<li><strong>Вызов процесса</strong> запускает внешний подпроцесс из текущего процесса. Это позволяет выполнять одинаковую последовательность действий в нескольких процессах.</li>
<li>По завершении выполнения подпроцесса токен переходит на следующий элемент диаграммы текущего процесса.</li>
</ul>
</div>
<div class="screenshot_with_caption">
<p><img alt="Вызов процесса и его меню элемента" src="https://kb.comindware.ru/assets/process_call.png"/></p>
<p class="caption">Вызов процесса и его меню элемента</p>
</div>
<h2 id="mcetoc_1h28b33420">Операции в меню элемента «Вызов процесса»</h2>
<ul>
<li><strong>Действия</strong>
<ul>
<li><strong>Свойства</strong> <em class="fa-light fa-gear">‌</em> — переход к окну <a class="mkdocs_imported_link" href="#mcetoc_1h28b33421">свойств вызова процесса</a>.</li>
<li><strong>Сценарий на входе</strong> <em class="fa-light fa-arrow-right-to-bracket">‌</em> — переход к конструктору сценария на входе в данный элемент.</li>
<li><strong>Сценарий на выходе</strong> <em class="fa-light fa-arrow-right-from-bracket">‌</em> — переход к конструктору сценария на выходе из данного элемента.</li>
<li><strong>Удалить</strong> <em class="fa-light fa-trash-can">‌</em> — удаление данного элемента из диаграммы процесса.</li>
<li><strong>Диаграмма</strong> <em class="fa-light fa-shuffle">‌</em> — переход к диаграмме подпроцесса. Также можно нажать кнопку <img alt="Кнопка перехода к диаграмме подпроцесса" src="https://kb.comindware.ru/assets/process_call_go_to_diagram.png"/> на самом элементе.</li>
</ul>
</li>
<li><strong>Быстрое создание</strong> — добавление связанного элемента на диаграмму процесса.</li>
</ul>
<h2 id="mcetoc_1h28b33421">Свойства вызова процесса</h2>
<p>В окне свойств <strong>вызова процесса</strong> предусмотрены перечисленные ниже вкладки.</p>
<h3 id="mcetoc_1h28b33422">Основные</h3>
<p>Помимо <a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4725">общих свойств элемента диаграммы процесса</a> на этой вкладке можно настроить перечисленные ниже свойства вызова процесса.</p>
<h4 id="mcetoc_1h28b33423">Базовые настройки</h4>
<ul>
<li><strong>Экспертные настройки</strong> — установите этот флажок, чтобы настроить дополнительные свойства вызова процесса. См. <a class="mkdocs_imported_link" href="#mcetoc_1h28b33423">экспертные настройки</a>.</li>
<li><strong>Шаблон процесса</strong> — выберите шаблон подпроцесса. Его экземпляры будут выполняться по заданным <strong>записям для запуска процесса</strong>. Если атрибут с записями не выбран, подпроцесс будет запущен 1 раз и будет создана новая связанная с ним запись. Когда выбран атрибут с записями, для выбора доступны только шаблоны процессов, связанные с соответствующим шаблоном записи.</li>
<li><strong>Записи для запуска процесса</strong> — выберите атрибут, который ссылается на записи в шаблоне, связанном с выбранным <strong>шаблоном процесса</strong>. По этим записям будут запускаться экземпляры подпроцесса. Если атрибут с записями не выбран, подпроцесс будет запущен 1 раз и будет создана новая связанная с ним запись. Когда выбран <strong>шаблон процесса</strong>, для выбора доступны только атрибуты связанного с ним шаблона записи.
<div class="notice notice-success">
<h3 class="admonition-title" id="mcetoc_1hc1rh2ej0">Пример</h3>
<p><strong>Исходные данные</strong></p>
<ul style="list-style-type: circle;">
<li>Шаблон основного процесса «<em>Управление транспортом</em>» связан с шаблоном записи «<em>Рейсы</em>».</li>
<li>Шаблон «<em>Рейсы</em>» содержит атрибут «<em>Затраты</em>», связанный с шаблоном записи «<em>Расходы водителей</em>».</li>
<li>Шаблон подпроцесса «<em>Учёт расходов водителей</em>» связан с шаблоном записи «<em>Расходы водителей</em>».</li>
<li>На диаграмму процесса «<em>Управление транспортом</em>» вынесен элемент «<strong>Вызов процесса</strong>».</li>
<li>В <strong>вызове процесса</strong> выбран шаблон процесса «<em>Учёт расходов водителей</em>».</li>
<li>В поле «<strong>Записи для запуска процессов</strong>» выбран атрибут «<em>Затраты</em>» из шаблона «<em>Рейсы</em>», основного процесса.</li>
</ul>
<p><strong>Результирующее поведение</strong></p>
<ul style="list-style-type: circle;">
<li>В записи «<em>Рейс 001</em>» в атрибуте «<em>Затраты</em>» хранятся ссылки на 5 записей с затратами водителей во время рейса.</li>
<li>Процесс «<em>Управление транспортом</em>» связан с записью «<em>Рейс 001</em>» и вызывает процесс «<em>Учёт расходов водителей</em>».</li>
<li>Процесс «<em>Учёт расходов водителей</em>» будет выполнен 5 раз — по каждой записи шаблона «<em>Расходы водителей</em>» из атрибута «<em>Затраты</em>».</li>
</ul>
</div>
</li>
<li><strong>Версия диаграммы процесса</strong> — выберите версию диаграммы, по которой будет запускаться процесс.
<ul>
<li><strong>Последняя</strong> — будет использоваться последняя опубликованная версия диаграммы.</li>
<li><strong>1.0…</strong> — будет использоваться диаграмма указанной версии.</li>
</ul>
</li>
<li><strong>Выполнение экземпляров процесса</strong> — выберите режим выполнения экземпляров процесса.
<ul>
<li><strong>Однократное</strong> — будет запущен только один экземпляр подпроцесса. Этот режим выбирается автоматически, если не заполнено поле «<strong>Записи для запуска процесса</strong>». В этом режиме элемент «<strong>Вызов процесса</strong>» отображается на диаграмме без линий.</li>
<li><strong>Последовательное</strong> — экземпляры подпроцесса будут выполняться последовательно по <strong>записям для запуска процесса</strong>. В этом режиме элемент «<strong>Вызов процесса</strong>» отображается на диаграмме с тремя горизонтальными линиями.</li>
<li><strong>Параллельное</strong> — экземпляры подпроцесса будут выполняться параллельно по <strong>записям для запуска процесса</strong>. В этом режиме элемент «<strong>Вызов процесса</strong>» отображается на диаграмме с тремя вертикальными линиями.</li>
</ul>
</li>
<li><strong>Условие запуска процесса</strong> — введите формулу, возвращающую <code>true</code> при условиях, когда требуется запускать подпроцесс.</li>
</ul>
<div class="screenshot_with_caption">
<p><img alt="Основные свойства вызова процесса — обычные настройки" class="img-responsive" height="481" src="https://kb.comindware.ru/assets/process_call_general_properties.png" width="975"/></p>
<p class="caption">Основные свойства вызова процесса — обычные настройки</p>
</div>
<h4 id="mcetoc_1hc1rp7mq1">Экспертные настройки</h4>
<p>Пример использования экспертных настроек см. в статье <em>«<samp data-name="aid" data-title="" data-value="4915"><span style="color: #0066bc; font-family: Tahoma;"><img src="https://kb.comindware.ru/images/marker.png" style="vertical-align: middle;"/>Шевроны: визуализация этапов процесса {Article-ID:4915}</span></samp>».</em></p>
<ul>
<li><strong>Выражение для выборки объектов</strong> — введите формулу, возвращающую список записей, по которым будет выполняться итерация запуска экземпляров подпроцесса.</li>
<li><strong><a id="expertSelectionTemplate"></a>Шаблон для выборки объектов</strong> — выберите шаблон записи, из которого требуется осуществлять выборку объектов. Связанные с ним шаблоны процессов будут отображаться в списке «<a href="#expertProcessTemplate"><strong>Шаблон процесса</strong></a>».</li>
<li><strong>Режим выполнения</strong>
<ul>
<li><strong>Параллельный</strong> — экземпляры подпроцесса будут выполняться одновременно и параллельно.</li>
<li><strong>Последовательный</strong> — новые экземпляры подпроцесса будут запускаться после завершения предыдущего экземпляра.</li>
</ul>
</li>
<li><strong>Выполнение экземпляров процесса</strong> — это поле заполняется автоматически:
<ul>
<li><strong>Однократное</strong> — будет запущен один экземпляр процесса;</li>
<li><strong>Последовательный</strong> — экземпляры процесса будут выполняться последовательно;</li>
<li><strong>Параллельный</strong> — экземпляры процесса будут выполняться параллельно.</li>
</ul>
</li>
<li><strong><a id="expertRecordToProcessRelation"></a>Связь шаблона записи с процессом</strong> — выберите тип подпроцесса.
<ul>
<li><strong>Непосредственная</strong> — можно выбрать <strong>шаблон процесса</strong>, непосредственно связанный с <a href="#expertSelectionTemplate"><strong>шаблоном для выборки объектов</strong></a>.</li>
<li><strong>Через атрибут</strong> — можно выбрать <strong>шаблон процесса</strong>, связанный с <strong>шаблоном для выборки объектов</strong> посредством атрибута типа «<strong>Запись</strong>» (этот атрибут указан в раскрывающемся списке в скобках).</li>
</ul>
</li>
<li><strong><a id="expertProcessTemplate"></a>Шаблон процесса</strong> — выберите подпроцесс, экземпляры которого будут выполняться. Набор шаблонов в этом раскрывающемся списке зависит от <a href="#expertSelectionTemplate"><strong>шаблона для выборки объектов</strong></a> и <a href="#expertRecordToProcessRelation"><strong>связи с процессом</strong></a>.</li>
<li><strong>Версия диаграммы процесса</strong> — выберите версию диаграммы, по которой будет запускаться подпроцесс:
<ul>
<li><strong>Последняя</strong> — будет использоваться последняя опубликованная версия диаграммы;</li>
<li><strong>1.0…</strong> — будет использоваться диаграмма указанной версии.</li>
</ul>
</li>
<li><strong>Записи, связанные с процессом</strong> — укажите способ обработки записей в шаблоне, связанном с подпроцессом, на которые указывает <a href="#linkAttribute"><strong>атрибут связи</strong></a>.
<ul>
<li><strong>Создавать новые</strong> — для каждого экземпляра подпроцесса будет создаваться новая запись. <span style="letter-spacing: 0.2px;">ID созданных записей будут помещены в <strong>атрибут связи</strong>.</span></li>
<li><strong>Использовать существующие</strong> — экземпляры подпроцесса будут выполняться по имеющимся записям, ID которых хранятся <span style="letter-spacing: 0.2px;">в <strong>атрибуте связи</strong></span>. Если <strong>атрибут связи</strong> не указан, будет создана <em>одна</em> новая запись.</li>
</ul>
</li>
<li><strong><a id="linkAttribute"></a>Атрибут связи</strong> — выберите атрибут типа «<strong>Запись</strong>» шаблона записи, связанного с <em>текущим процессом</em> (для выбора в этом списке доступны <em>только</em> атрибуты, связанные с <a href="#expertProcessTemplate"><strong>шаблоном процесса</strong></a>). Если выбрано <strong>создание записей, связанных с процессом</strong>, в этот атрибут будет записываться <strong>ID</strong> записи, возвращённый <strong>выражением для выборки объектов</strong>, для каждой созданной записи в шаблоне.</li>
<li><strong>Действие с записями</strong> — выберите действие со значениями <strong>атрибута связи</strong>, выполняемое при запуске подпроцесса.
<ul>
<li><strong>Не задано</strong> — не выполнять действие.</li>
<li><strong>Добавить</strong> — добавление ID записи в <strong>атрибут связи</strong>.</li>
<li><strong>Удалить</strong> — удаление ID записи из <strong>атрибута связи</strong>.</li>
</ul>
</li>
</ul>
<div class="screenshot_with_caption">
<p><img alt="Основные свойства вызова процесса — экспертные настройки" src="https://kb.comindware.ru/assets/process_call_general_properties_expert_settings.png"/></p>
<p class="caption">Основные свойства вызова процесса — экспертные настройки</p>
</div>
<h3 id="mcetoc_1h28b33424">Данные на входе</h3>
<p>На этой вкладке можно настроить передачу данных из текущего процесса в вызываемый. Задайте значения атрибутов в записях, по которым будет запускаться вызываемый процесс. Значения будут присвоены перед запуском каждого экземпляра подпроцесса.</p>
<p>Чтобы добавить строку в таблицу сопоставления данных, нажмите кнопку «<strong>Добавить</strong>».</p>
<ul>
<li><strong>Атрибут шаблона записи подпроцесса</strong> — укажите в этом столбце атрибут шаблона записи, связанного с подпроцессом.</li>
<li><strong>Значение</strong> — задайте в этом столбце значения <strong>атрибутов шаблона процесса</strong>.
<ul>
<li><strong>Формула</strong> — введите формулу, возвращающую необходимое значение.</li>
<li><strong>Атрибут</strong> — укажите атрибут текущего шаблона (или связанного с ним шаблона), в котором хранится необходимое значение.</li>
<li><strong>Значение</strong> — задайте значение в формате, соответствующем типу данных <strong>атрибута шаблона процесса</strong>.</li>
</ul>
</li>
</ul>
<div class="screenshot_with_caption">
<p><img alt="Настройка передачи данных из текущего процесса в вызываемый" src="https://kb.comindware.ru/assets/process_call_input_data.png"/></p>
<p class="caption">Настройка передачи данных из текущего процесса в вызываемый</p>
</div>
<h3 id="mcetoc_1h28b33425">Данные на выходе</h3>
<p>На этой вкладке можно настроить передачу данных из подпроцесса в текущий. Задайте значения атрибутов в записи, связанной с экземпляром текущего процесса. Значения будут присвоены в записи, связанной с экземпляром текущего процесса, после выполнения экземпляров подпроцесса.</p>
<p>Чтобы добавить строку в таблицу сопоставления данных, нажмите кнопку «<strong>Добавить</strong>».</p>
<ul>
<li><strong>Атрибут записи текущего процесса</strong> — укажите в этом столбце атрибут шаблона записи, связанного с текущим процессом.</li>
<li><strong>Атрибут шаблона записи подпроцесса</strong> — укажите в этом столбце атрибут шаблона записи, связанного с подпроцессом. Значение этого атрибута будет присвоено <strong>атрибуту записи текущего процесса</strong>.</li>
</ul>
<div class="screenshot_with_caption">
<p><img alt="Настройка передачи данных в текущий процесс из вызываемого" src="https://kb.comindware.ru/assets/process_call_output_data.png"/></p>
<p class="caption">Настройка передачи данных в текущий процесс из вызываемого</p>
</div>
<h2 id="mcetoc_1h28b33426">Связанные статьи</h2>
<p><strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4731">Встроенный подпроцесс</a></strong></p>
<p><strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4725">Общие свойства элементов диаграммы процесса</a></strong></p>
<p><strong><a class="autorefs autorefs-internal mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4724">Элементы диаграммы процесса</a></strong></p>
<p><strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article.php?id=4721">Редактирование диаграммы процесса</a></strong></p>
</div>
</div>
<a class="md-top md-icon mkdocs_imported_link" href="#"> <em class="fa-light fa-arrow-up">‌</em> К началу </a></div>