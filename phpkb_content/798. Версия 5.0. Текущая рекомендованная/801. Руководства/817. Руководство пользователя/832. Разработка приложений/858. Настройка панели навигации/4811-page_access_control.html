<h1>Информационные страницы. Контроль доступа</h1><div class="md-container" data-md-component="container">
<div class="md-main__inner md-grid"><nav aria-label="Содержание" class="md-nav md-nav--secondary">
<div class="mce-toc">
<h2 class="toc-heading">Содержание</h2>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#введение"> <span class="md-ellipsis"> Введение </span> </a></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#пример-настройки-раздела-навигации-для-разграничения-доступа"> <span class="md-ellipsis"> Пример настройки раздела навигации для разграничения доступа </span> </a><nav aria-label="Пример настройки раздела навигации для разграничения доступа" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#исходные-данные"> <span class="md-ellipsis"> Исходные данные </span> </a></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#настройка-приложения"> <span class="md-ellipsis"> Настройка приложения </span> </a></li>
</ul>
</nav></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#тестирование"> <span class="md-ellipsis"> Тестирование </span> </a></li>
<li class="md-nav__item"><a class="md-nav__link mkdocs_imported_link" href="#связанные-статьи"> <span class="md-ellipsis"> Связанные статьи </span> </a></li>
</ul>
</div>
</nav>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h2 id="введение">Введение</h2>
<p>При настройке приложения может потребоваться разграничить доступ к информационным страницам (и пользовательским ссылкам) в соответствии с <strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article\.php\?id=4803">ролями</a></strong>.</p>
<p>Поэтому, чтобы информационную страницу (или пользовательскую ссылку) видели пользователи только определённой роли, создайте отдельный раздел навигации, назначьте его только данной роли и поместите в него требуемую страницу (или пользовательскую ссылку).</p>
<div class="notice notice-warning">
<p class="admonition-title">Логика отображения ресурсов в разделе навигации</p>
<p>В рамках одного раздела навигации нельзя настроить видимость отдельных страниц и пунктов, так как роли назначаются разделу навигации в целом:</p>
<ul>
<li>каждой роли внутри приложения можно назначить только один раздел навигации;</li>
<li>один и тот же раздел навигации может быть назначен нескольким ролям.</li>
</ul>
<p>При этом отображение данных для конкретного пользователя зависит от разрешений, которые предоставлены его роли:</p>
<ul>
<li>Если роли не предоставлен доступ к приложению, таблице с записями или экземплярами процесса, кнопкам, диаграмме процесса, модели данных или классов, то пункты для них не отображаются в разделе навигации.</li>
<li>Информационные страницы в разделе навигации и на рабочем столе отображаются для тех пользователей, роли которых назначены данному разделу.
<ul>
<li>При этом от разрешений роли зависит отображение виджетов на страницах: если доступ к данным того или иного виджета отсутствует, то он будет отображаться пустым.</li>
</ul>
</li>
<li>Системные виджеты на информационных страницах отображаются независимо от роли пользователя.</li>
<li>Пользовательские ссылки в разделе навигации отображаются для всех пользователей, роли которых назначены данному разделу.</li>
</ul>
</div>
<h2 id="пример-настройки-раздела-навигации-для-разграничения-доступа">Пример настройки раздела навигации для разграничения доступа</h2>
<p>Здесь представлен пример настройки ролей и раздела навигации для разграничения доступа к ресурсам приложения и информационным страницам, а также продемонстрировано, как отображаются раздел навигации и страница для пользователей с разными правами доступа.</p>
<h3 id="исходные-данные">Исходные данные</h3>
<p>В приложении <em>«Автопарк»</em> создан процесс <em>«Распределение заявок»</em>, который связан с шаблоном <em>«Заявки»</em>. Этот шаблон содержит атрибут <em>«Вид ТС»</em> типа <em>«Список значений»</em>. В шаблоне <em>«Заявки»</em> имеется несколько записей с разными <em>видами ТС</em>.</p>
<h3 id="настройка-приложения">Настройка приложения</h3>
<ol class="colored_numbers_list">
<li>Создайте роль <em>«Сотрудники»</em> и дайте разрешение на создание экземпляров процесса <em>«Распределение заявок»</em> и использование кнопки «<strong>Создать</strong>» этого процесса.</li>
<li>Создайте роль <em>«Диспетчеры»</em> и дайте разрешение на создание и просмотр экземпляров процесса <em>«Распределение заявок»</em>, а также на создание, просмотр и ввод данных в шаблоне записи <em>«Заявки»</em>.</li>
<li>Создайте и сохраните новый раздел навигации.</li>
<li>Создайте и сохраните страницу <em>«Сводка заявок»</em>.</li>
<li>
<p>Создайте диаграмму <em>«Распределение заявок по виду транспортного средства»</em> со следующими параметрами:</p>
<ul>
<li><strong>Шаблон</strong> — <em>заявки</em>;</li>
<li><strong>Категории</strong> — <em>вид ТС</em>;</li>
<li><strong>Вычислять</strong> — <strong>количество</strong>.</li>
</ul>
</li>
<li>
<p>Создайте баннер <em>«Автопарк»</em> и прикрепите к нему изображение.</p>
</li>
<li>Добавьте созданные баннер и диаграмму на страницу <em>«Сводка заявок»</em>.</li>
<li>Сохраните страницу <em>«Сводка заявок»</em>.</li>
<li>Добавьте в раздел навигации страницу <em>«Сводка заявок»</em>, таблицу <em>«Все записи»</em> шаблона процесса <em>«Распределение заявок»</em> и кнопку «<strong>Создать</strong>» этого шаблона процесса.</li>
<li>Выберите роли <em>«Сотрудники»</em> и <em>«Диспетчеры»</em> в свойствах раздела навигации.</li>
<li>Сохраните раздел навигации.</li>
</ol>
<h2 id="тестирование">Тестирование</h2>
<ol class="colored_numbers_list">
<li>Выполните вход в аккаунт с ролью <em>«Диспетчеры»</em>.</li>
<li>В панели навигации отобразятся пункты <em>«Распределение заявок»</em>, <em>«Сводка заявок»</em> и <em>«Создать»</em>.</li>
<li>Перейдите на страницу <em>«Сводка заявок»</em>.</li>
<li>На странице отобразятся баннер и диаграмма <em>«Распределение заявок по виду транспортного средства»</em>. Так как у роли <em>«Диспетчеры»</em> есть доступ к данным в шаблоне <em>«Заявки»</em>, то диаграмма отображается корректно.</li>
<li>Чтобы создать новую заявку, выберите пункт <em>«Создать»</em>.</li>
<li>
<p>Чтобы посмотреть список экземпляров процесса, выберите пункт <em>«Распределение заявок»</em>.</p>
<figure class="screenshot_with_caption"><img alt="Отображение виджетов на странице «Сводка заявок» при наличии доступа к данным" src="https://kb.comindware.ru/assets/page_access_control_full_access.png"/>
<figcaption class="caption">Отображение виджетов на странице «Сводка заявок» при наличии доступа к данным</figcaption>
</figure>
</li>
<li>
<p>Выполните вход в аккаунт с ролью <em>«Сотрудники»</em>.</p>
</li>
<li>В панели навигации отобразятся пункты <em>«Сводка заявок»</em> и <em>«Создать»</em>.</li>
<li>Пункт <em>«Распределение заявок»</em> отображаться не будет, так как у роли <em>«Сотрудники»</em> нет доступа к просмотру экземпляров данного процесса.</li>
<li>Перейдите на страницу <em>«Сводка заявок»</em>.</li>
<li>
<p>На странице отобразится баннер. На диаграмме <em>«Распределение заявок по виду транспортного средства»</em> будет видна надпись «<strong>Нет данных</strong>», так как аккаунтам с ролью <em>«Сотрудники»</em> не предоставлен доступ к данным по заявкам.</p>
<figure class="screenshot_with_caption"><img alt="Отображение виджетов на странице «Сводка заявок» при отсутствии доступа к данным" src="https://kb.comindware.ru/assets/page_access_control_partial_access.png"/>
<figcaption class="caption">Отображение виджетов на странице «Сводка заявок» при отсутствии доступа к данным</figcaption>
</figure>
</li>
</ol>
<h2 id="связанные-статьи">Связанные статьи</h2>
<p><strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article\.php\?id=4809">Панель и разделы навигации. Настройка</a></strong></p>
<p><strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article\.php\?id=4803">Роли в приложении. Определения, настройка, объединение, удаление</a></strong></p>
<p><strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article\.php\?id=4810">Информационные страницы. Настройка</a></strong></p>
<p><strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article\.php\?id=4822">Информационные страницы. Использование</a></strong></p>
<p><strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article\.php\?id=4813">Рабочий стол. Использование</a></strong></p>
<p><strong><a class="mkdocs_imported_link" href="https://kb.comindware.ru/article\.php\?id=4823">Рабочий стол. Использование</a></strong></p>
</article>
</div>
</div>
<a class="md-top md-icon mkdocs_imported_link" data-md-component="top" href="#"> <em class="fa-light fa-arrow-up">‌<!--icon--></em> К началу </a></div>