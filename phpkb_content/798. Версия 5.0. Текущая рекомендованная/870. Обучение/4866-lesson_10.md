---
title: Урок 10. Работа с файлами
kbId: 4866
---

# Урок 10. Работа с файлами

## Введение

В ходе этого урока вы узнаете, как с помощью **атрибута типа «Документ»** прикреплять к записям (загружать) и скачивать файлы: документы и изображения.

**Предусловие:** пройден *[урок 9 «Формирование документов»][lesson_9]*.

**Расчётная продолжительность:** 10 мин.

Примечание

В данном уроке представлен продукт **{{ productName }}** версии 5.0, внешний вид страниц и меню в других версиях продукта может отличаться.

## Настройка загрузки документов и изображений

Бизнес-логика

После выполнения рейса *Водитель* должен иметь возможность загрузить в систему сканы квитанций и другие документов.

Для этого добавим на форму его задачи соответствующее поле.

Атрибут типа «Документ»

**Атрибут типа «Документ»** хранит файлы, загруженные пользователями.

При настройке **атрибута типа «Документ»** можно разрешить загрузку файлов только определенных типов или любых файлов.

Поле документа на форме позволяет загружать, скачивать, удалять и просматривать файлы.

### Создание атрибута типа «Документ»

Добавим **атрибут типа «Документ»** в шаблон *«Затраты»*…

1. Откройте шаблон записи *«Затраты»*.
2. Перейдите на вкладку «**Атрибуты**».
3. Создайте атрибут:

   - **Название:** *Вложения*
   - **Тип данных: документ**
   - **Хранить несколько значений:** установите флажок
4. Сохраните атрибут.

   ![Настройка атрибута типа «Документ»](/platform/v5.0/tutorial/img/lesson_10_document_attribute_configure.png)

   Настройка атрибута типа «Документ»

### Добавление поля с документами на форму

Добавим атрибут *«Вложения»* в таблицу затрат на форме задачи *«Выполнить рейс»*.

1. Откройте шаблон процесса *«Заказ автотранспорта»*.
2. Перейдите к вкладке «**Диаграмма**» и нажмите кнопку «**Редактировать**».
3. Выберите задачу *«Выполнить рейс»* и в меню элемента нажмите кнопку «**Форма**» *‌*.
4. В конструкторе формы задачи на панели элементов разверните шаблон *«Заявки на автомобили»* и в нём разверните атрибут *«Затраты»*.
5. Перетащите атрибут *«Вложения»* на форму в таблицу *«Затраты»*.
6. В таблице *«Затраты»* должен появиться столбец *«Вложения»*.
7. Сохраните форму задачи.

   ![Добавление атрибута типа «Документ» в таблицу на форме](/platform/v5.0/tutorial/img/lesson_10_document_add_to_table.png)

   Добавление атрибута типа «Документ» в таблицу на форме
8. Вернитесь к диаграмме процесса и опубликуйте её.

## Тестирование загрузки и скачивания документа

Примечание

Если вы прошли *[Урок 8 *«Аккаунты, группы и роли»*][lesson_8]*, пользовательские задачи назначаются разным аккаунтам.

Для прохождения процесса вы можете выполнять пользовательские задачи одним из трёх способов:

- Войдите в систему несколько раз с разными аккаунтами: *Заказчик, Секретарь, Водитель, Диспетчер гаража*.
- Создайте заявку на автомобиль. Откройте диаграмму запущенного экземпляра процесса *«Заказ автотранспорта»*. Переходите к задачам с помощью кнопки «**Перейти**» *‌* на панели «**Токены**».
- Назначьте свой аккаунт исполнителем всех пользовательских задач.

1. Создайте новую заявку на автомобиль и пройдите бизнес-процесс до задачи *«Выполнить рейс»*.
2. На форме задачи *«Выполнить рейс»* создайте запись в таблице *«Затраты»*.
3. Прикрепите текстовый документ (например, в формате PDF) к созданной записи:

   - Нажмите в строке затрат поле *«Вложение»*.
   - Нажмите кнопку «**Добавить документ**».
4. Создайте ещё одну запись в таблице *«Затраты»*.
5. Прикрепите изображение (например, в формате JPG) ко второй строке затрат.
6. Сохраните заявку.
7. Проверьте возможность скачивания загруженных документов из заявки:

   - Нажмите название загруженного документа или изображения в таблице затрат.
   - Браузер скачает прикрепленный файл.

_![Загрузка и скачивание файла с помощью таблицы на форме](/platform/v5.0/tutorial/img/lesson_10_file_download_upload.png)_

## Результаты

Вы научились работать с файлами: загружать в систему и скачивать документы и изображения.

{% include-markdown ".snippets/hyperlinks_mkdocs_to_kb_map.md" %}
